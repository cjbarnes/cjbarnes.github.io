/**
 * Article header/footer and container styles, used on both single posts/pages
 * and for post indexes. (Content area styles are in `_content.scss`.)
 *
 * @version 1.0.0
 * @package cjbarnes.github.io
 */


/**
 * Article header.
 */

/* Output header colours for each post/item format. */
@each $format, $color in $format-colors {
    article.#{$format} {

        > header,
        header .date-unit,
        .listing &:before {
            background: $color;
        }

    }
}

/* Illustrated post header colours. */
article.illustrated {

    > header,
    .date .date-unit,
    .listing &:before {
        background: $background-color-illustrated;
    }

}

/* Additional link styling for Link and Project items. */
article.link,
article.project {

    /* Make links visible when in the header area. */
    > header a {

        &:hover,
        &:focus {
            border-color: $text-color-reversed;
            background: $text-color-reversed;
            color: $link-color;
        }

        &:active {
            border-color: $link-color-active;
            background: $link-color-active;
            color: $text-color-reversed;
        }

    }

}

/* Page/post title. */
article {

    /*
     * Page/post title wrapper.
     * 1. Stay on top of illustration and gradient.
     */
    .title {
        position: relative; /* 1 */
        z-index: 2;
    }

    /* Title. */
    .title-main {
        @include rem("padding", $line 0);
        margin: 0;
        color: $text-color-reversed;

        /* Links in titles. */
        a {
            padding: 0 0 ($link-padding / 2);
            color: inherit;
        }

    }

    /* Subtitle/excerpt. */
    .title-summary {
        @include rem("margin", 0 0 $line);
        @include font-size-leading("normal");
        font-family: $font-family-content;
        color: $text-color-reversed;
    }

}


/**
 * My Approach timeline 'steps'.
 */

/* Standard steps. */
article.step {

    > header,
    .listing &:before {
            background: $color-step;
    }

}

/* Launch step. */
article.launch {

    > header,
    .listing &:before {
            background: $color-step-launch;
    }

}


/**
 * Article footer (metadata section).
 */

/*
 * 1. For metadata elements' positioning.
 */
article footer {
    @include rem("min-height", ($line * 3));
    @include rem("padding-bottom", ($line * 0.5));
    position: relative; /* 1 */
    z-index: 3;
    text-align: center;
    background: $background-color-page-footer;
}

.permalink {
    @include rem("margin-left", $gutter);
}

.share,
.go-to-site {
    @include rem("margin-right", $gutter);
}


/**
 * Featured articles.
 */

/*
 * 1. For article footer positioning.
 */
article.featured {
    @include clearfix;
    position: relative; /* 1 */
    background-color: $background-color-illustrated;
}

/* Metadata footer */
article.featured footer {
    @include rem("height", $line);
    min-height: 0;
    background: transparent;

    /*
     * Adjust metadata colours and sizes to match the dark/full-width masthead.
     */
    .permalink,
    .share {
        @include font-size-leading("large");
        color: $text-color-reversed;
    }

    .permalink {
        @include rem("left", $gutter);
        margin-left: 0;
    }

    .share {
        @include rem("right", $gutter);
        margin-right: 0;
    }

}


/**
 * Media query.
 *
 * Tablets and wider.
 */
@include media-width("normal-size") {

    /* Article alignment. */
    article .title {
        @include push;
        @include pull;
    }

    /* Metadata alignment. */
    article footer {
        padding-bottom: 0;

        /* Left- and right-aligned metadata fields. */
        .permalink,
        .share,
        .go-to-site {
            @include rem("bottom", ($line * 0.8)); // @todo: check this maths
            position: absolute;
            display: block;
            padding-left: 0;
            padding-right: 0;
        }

        .permalink {
            @include push;
            left: 0;
        }

        .share,
        .go-to-site {
            @include pull;
            right: 0;
        }

    }

    /* Featured article footers. */
    article.featured footer {
        @include column(8);
        @include push(2);
        @include pull(2);
    }

} //include media-width(normal-size)
